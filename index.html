<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title data-i18n="meta.title">LIXBY — Tecnología minimalista</title>

  <!-- PERF: preconnect para reducir latencia en recursos externos -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://www.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://images.weserv.nl" crossorigin>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>

  <link rel="stylesheet" href="style.css" />
  <!-- Pequeños overrides y utilidades inline (NO BORRAR: conservadas y combinadas) -->
  <style>
    :root {
      --radius-md: 12px; --radius-lg: 16px;
      --accent: #0a84ff;
      --muted: #8a8f98;
      --text: #0b0f19;
      --bg: #fff;
      --bg-alt: #fafafa;
      --card: #fff;
      --card-shadow: 0 12px 30px rgba(2,6,12,0.06);
      --input: #f5f6fa;
      --primary-btn: #0a84ff;
      --primary-btn-txt: #fff;
      --link: #0a84ff;
      --footer-bg: #fff;
    }
    html.light {
      --bg: #fff;
      --bg-alt: #fafafa;
      --text: #0b0f19;
      --muted: #8a8f98;
      --card: #fff;
      --card-shadow: 0 12px 30px rgba(2,6,12,0.06);
      --input: #f5f6fa;
      --primary-btn: #0a84ff;
      --primary-btn-txt: #fff;
      --link: #0a84ff;
      --footer-bg: #fff;
    }
    html.dark, body.dark, body[data-theme="dark"] {
      --bg: #111920;
      --bg-alt: #19222b;
      --text: #fff;
      --muted: #b1b6be;
      --card: #19222b;
      --card-shadow: 0 12px 30px rgba(2,6,12,0.18);
      --input: #222d38;
      --primary-btn: #0a84ff;
      --primary-btn-txt: #fff;
      --link: #7ec9ff;
      --footer-bg: #181c1f;
    }
    body, html {
      background: var(--bg) !important;
      color: var(--text) !important;
      transition: background 0.3s, color 0.3s;
    }
    .glass, .section, .card, .footer, .footer-grid, .promo-card, .cart-panel-inner, .mini-cart, .lang-menu, .contact-min {
      background: var(--card) !important;
      color: var(--text) !important;
      box-shadow: var(--card-shadow);
      transition: background 0.3s, color 0.3s;
    }
    .btn, .btn-pro, .btn-discover, .promo-btn, .btn-download, .btn.primary, .btn.ghost {
      color: var(--primary-btn-txt) !important;
      background: var(--primary-btn) !important;
      border-color: var(--primary-btn) !important;
      transition: background 0.3s, color 0.3s;
    }
    .btn.ghost, .btn-download, .promo-btn.discover-cta, .btn-discover {
      background: transparent !important;
      color: var(--text) !important;
      border-color: var(--muted) !important;
    }
    .btn.ghost:hover, .btn-download:hover, .promo-btn.discover-cta:hover {
      background: var(--bg-alt) !important;
    }
    .price, .promo-kicker, .promo-meta p, .prod-desc, .footer-links a, .footer-col, .footer-bottom, .promo-mini {
      color: var(--muted) !important;
    }
    .footer, .footer-grid, .footer-bottom {
      background: var(--footer-bg) !important;
      color: var(--text) !important;
    }
    .promo-title-lg, .prod-title {
      color: var(--text) !important;
    }
    /* Header fixes */
    .nav-inner, .nav, header.nav, .nav-right, .nav-left {
      background: var(--card) !important;
      color: var(--text) !important;
    }
    /* Fix placeholder/textarea/input color in dark mode */
    input, textarea {
      background: var(--input) !important;
      color: var(--text) !important;
      border: 1px solid var(--muted) !important;
      transition: background 0.3s, color 0.3s;
    }
    input::placeholder, textarea::placeholder {
      color: var(--muted);
      opacity: 1;
    }
    /* Promo-card kicker and mini icon on dark */
    .promo-mini {
      background: rgba(0,0,0,0.13);
      color: var(--text) !important;
    }
    /* Ensure button text is visible */
    .btn, .btn-pro, .btn-discover, .promo-btn {
      font-weight: 800;
      letter-spacing: 0.02em;
      border-width: 1px;
      border-style: solid;
    }

    /* --- Responsive mobile header --- */
    @media (max-width: 720px) {
      .nav-inner {
        padding: 8px 12px;
        min-height: 48px;
      }
      .nav-left { flex: 1 0 auto; }
      .nav-right, nav#navLinks, .cart-wrapper, .lang-wrapper, #accountContainer, #themeToggle {
        display: none !important;
      }
      .mobile-menu-trigger {
        display: flex !important;
        align-items: center;
        justify-content: flex-end;
        cursor: pointer;
      }
    }
    @media (min-width: 721px) {
      .mobile-menu-trigger, .mobile-dropdown-menu { display: none !important; }
    }
    /* Mobile dropdown panel styles */
    .mobile-dropdown-menu {
      display: none;
      flex-direction: column;
      position: absolute;
      top: 56px;
      right: 18px;
      min-width: 240px;
      background: var(--card);
      color: var(--text);
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(12,18,30,0.14);
      z-index: 99;
      padding: 12px 0;
      transition: all 0.22s cubic-bezier(.2,.9,.3,1);
    }
    .mobile-dropdown-menu.open {
      display: flex !important;
    }
    .mobile-dropdown-menu a, .mobile-dropdown-menu button {
      background: none;
      border: none;
      color: var(--text);
      padding: 12px 20px;
      text-align: left;
      width: 100%;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.2s;
    }
    .mobile-dropdown-menu a:hover, .mobile-dropdown-menu button:hover {
      background: var(--bg-alt);
    }
    .mobile-dropdown-menu hr {
      margin: 4px 0;
      border: 0;
      border-top: 1px solid var(--muted);
      opacity: 0.18;
    }
    /* Icon size for menu */
    .mobile-menu-trigger img {
      width: 38px;
      height: 38px;
      border-radius: 8px;
      margin-left: 4px;
    }
    /* For overlay click outside mobile menu */
    #mobileMenuOverlay {
      display:none;
      position:fixed;
      top:0;left:0;right:0;bottom:0;
      background:rgba(0,0,0,0.12);
      z-index:98;
    }
    #mobileMenuOverlay.open { display:block; }
  </style>
</head>
<body>

<!-- NAV -->
<header class="nav glass" role="banner">
  <div class="nav-inner">
    <!-- LEFT: logo -->
    <div class="nav-left" style="display:flex;align-items:center;gap:12px;">
      <div class="brand"
           role="link"
           tabindex="0"
           aria-label="Ir al inicio"
           onclick="location.href='index.html'"
           onkeydown="if(event.key==='Enter' || event.key===' ') { event.preventDefault(); location.href='index.html'; }"
           style="display:flex;align-items:center;gap:10px;">
        <img src="https://i.imgur.com/dOCYmkx.jpeg" alt="LIXBY logo" width="44" height="44">
        <div class="title" style="font-weight:800;font-size:1rem;">LIXBY</div>
      </div>
    </div>
    <!-- MOBILE DROPDOWN TRIGGER -->
    <div class="mobile-menu-trigger" style="display:none;">
      <img src="https://www.shutterstock.com/image-vector/menu-icon-trendy-flat-style-600nw-432264136.jpg" alt="Menu" id="mobileMenuBtn" tabindex="0" aria-label="Abrir menú" />
    </div>
    <!-- CENTER: nav links -->
    <nav id="navLinks" role="navigation" aria-label="Principal">
      <a href="#inicio" data-i18n="nav.inicio">Inicio</a>
      <a href="#productos" data-i18n="nav.productos">Productos</a>
      <a href="#contacto" data-i18n="nav.contacto">Contáctanos</a>
      <a href="#conocenos" data-i18n="nav.conocenos">Conócenos</a>
    </nav>
    <!-- RIGHT: controles en fila -->
    <div class="nav-right" aria-hidden="false" style="display:flex;align-items:center;gap:12px;">
      <div class="cart-wrapper" style="position:relative;">
        <button id="cartBtn" class="icon-btn" aria-label="Ver carrito" aria-controls="miniCart" aria-expanded="false" type="button">🛒 <span id="cartCount" class="badge">0</span></button>
        <div id="miniCart" class="mini-cart glass" aria-hidden="true" role="region" aria-label="Mini carrito">
          <div class="mini-cart-header" style="display:flex;justify-content:space-between;align-items:center;">
            <strong data-i18n="cart.title">Carrito</strong>
            <button id="clearCart" class="text-btn" data-i18n="cart.clear" type="button">Vaciar</button>
          </div>
          <div id="miniCartItems" class="mini-cart-items" tabindex="0" aria-live="polite" style="max-height:220px;overflow:auto;"></div>
          <div class="mini-cart-footer" style="display:flex;flex-direction:column;gap:8px;margin-top:8px;">
            <div style="display:flex;justify-content:space-between;align-items:center;">
              <div><strong data-i18n="cart.total">Total:</strong> <span id="miniCartTotal">0€</span></div>
              <div><button id="checkoutBtn" class="btn primary" data-i18n="cart.checkout" type="button">Pagar</button></div>
            </div>
            <div style="display:flex;gap:8px;">
              <button id="viewCartBtn" class="btn ghost" type="button" data-i18n="cart.view">Ver carrito</button>
            </div>
          </div>
        </div>
      </div>
      <div class="lang-wrapper" style="position:relative;">
        <button id="langBtn" class="icon-btn" aria-haspopup="true" aria-expanded="false" type="button"> <span id="langFlag">🇪🇸</span> <span id="langLabel">Español</span> ▾ </button>
        <div id="langMenu" class="lang-menu glass" aria-hidden="true" style="display:none;flex-direction:column;gap:6px;padding:8px;width:220px;position:absolute;right:0;top:44px;">
          <button class="lang-item" data-lang="es" type="button">🇪🇸 Español</button>
          <button class="lang-item" data-lang="en" type="button">🇬🇧 English</button>
          <button class="lang-item" data-lang="fr" type="button">🇫🇷 Français</button>
          <button class="lang-item" data-lang="de" type="button">🇩🇪 Deutsch</button>
          <button class="lang-item" data-lang="it" type="button">🇮🇹 Italiano</button>
          <button class="lang-item" data-lang="pt" type="button">🇵🇹 Português</button>
          <button class="lang-item" data-lang="nl" type="button">🇳🇱 Nederlands</button>
          <button class="lang-item" data-lang="zh" type="button">🇨🇳 中文</button>
          <button class="lang-item" data-lang="ja" type="button">🇯🇵 日本語</button>
        </div>
      </div>
      <!-- SOLO UN BOTÓN CUENTA + PRO -->
      <div id="accountContainer" style="display:flex;align-items:center;gap:8px;">
        <div id="accountPreview" style="display:none;align-items:center;gap:8px;cursor:pointer;" role="button" tabindex="0" aria-label="Ir a mi cuenta">
          <img id="accountAvatar" src="" alt="Avatar" width="36" height="36" style="border-radius:10px;object-fit:cover;">
          <strong id="accountName" style="font-size:0.95rem"></strong>
        </div>
        <button id="accountBtn" class="btn ghost" aria-label="Mi cuenta" type="button">Cuenta</button>
        <!-- NUEVO: botón PASATE AL PRO (al lado de la cuenta) -->
        <button id="proBtn" class="btn btn-pro" type="button" aria-label="Pásate al Pro" data-i18n="pro.cta">PÁSATE AL PRO</button>
      </div>
      <button id="themeToggle" class="btn ghost" aria-label="Cambiar tema" type="button">◐</button>
    </div>
  </div>
  <!-- MOBILE DROPDOWN CONTENT -->
  <div id="mobileMenuOverlay"></div>
  <div class="mobile-dropdown-menu" id="mobileDropdownMenu" aria-hidden="true">
    <a href="#inicio" data-i18n="nav.inicio">Inicio</a>
    <a href="#productos" data-i18n="nav.productos">Productos</a>
    <a href="#contacto" data-i18n="nav.contacto">Contáctanos</a>
    <a href="#conocenos" data-i18n="nav.conocenos">Conócenos</a>
    <hr>
    <button id="mobileLangBtn"><span id="mobileLangFlag">🇪🇸</span> <span id="mobileLangLabel">Español</span></button>
    <button id="mobileCartBtn">🛒 <span id="mobileCartCount">0</span></button>
    <button id="mobileAccountBtn">Cuenta</button>
    <button id="mobileProBtn" data-i18n="pro.cta">PÁSATE AL PRO</button>
    <button id="mobileThemeToggle">◐</button>
  </div>
</header>

<main id="maincontent">
  <!-- HERO -->
  <section id="inicio" class="hero reveal" aria-labelledby="hero-title">
    <video class="hero-bg" autoplay muted loop playsinline preload="auto" aria-hidden="true">
      <source src="Bienvenido.mp4" type="video/mp4">
    </video>
    <div class="hero-content">
      <h1 id="hero-title" data-i18n="hero.title">La tecnología que te entiende</h1>
      <p id="hero-subtitle" data-i18n="hero.subtitle">Innovación minimalista para tu día a día</p>
      <a href="explorar.html" class="btn primary" data-i18n="btn.explorar">Explorar</a>
    </div>
  </section>

  <!-- NUEVA SECCIÓN: Apple-like square promo cards (añadida sin borrar nada) -->
  <section class="promo-row" aria-labelledby="promo-title" role="region">
    <div class="promo-title">
      <h2 id="promo-title">Descubre</h2>
      <div style="color:var(--muted);font-size:0.95rem">Seleccionado por LIXBY — minimal, claro y directo</div>
    </div>
    <div class="promo-cards" role="list">
      <!-- CARD 1: PÁSATE AL PRO -->
      <article class="promo-card" role="listitem" tabindex="0" aria-labelledby="pro-card-title" data-card="pro">
        <div class="promo-media" aria-hidden="true">
          <img src="https://images.unsplash.com/photo-1517336714731-489689fd1ca8?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=8b2a1b2a3f3a9b3e" alt="Pro">
        </div>
        <div class="promo-meta">
          <div class="promo-kicker">Exclusivo</div>
          <h3 id="pro-card-title" class="promo-title-lg">PÁSATE AL PRO</h3>
          <p style="margin:0;color:var(--muted)">Funciones avanzadas, soporte prioritario y materiales premium.</p>
          <div class="promo-cta-row">
            <button class="promo-btn pro-cta" id="goProBtn" type="button" aria-label="Pásate al Pro">PÁSATE AL PRO →</button>
            <button class="promo-btn discover-cta" id="learnProBtn" type="button" aria-label="Más info Pro">Más info</button>
          </div>
        </div>
        <div class="promo-mini" aria-hidden="true">PRO</div>
      </article>

      <!-- CARD 2: DESCUBRE NUESTROS PRODUCTOS -->
      <article class="promo-card" role="listitem" tabindex="0" aria-labelledby="discover-card-title" data-card="discover">
        <div class="promo-media" aria-hidden="true">
          <img src="https://images.unsplash.com/photo-1519389950473-47ba0277781c?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=7f6f6ad9d4f8c4c8" alt="Productos">
        </div>
        <div class="promo-meta">
          <div class="promo-kicker">Colección</div>
          <h3 id="discover-card-title" class="promo-title-lg">DESCUBRE NUESTROS PRODUCTOS</h3>
          <p style="margin:0;color:var(--muted)">Explora el catálogo y encuentra el LIXBY que mejor encaja contigo.</p>
          <div class="promo-cta-row">
            <a href="#productos" class="promo-btn discover-cta" role="button" aria-label="Descubre nuestros productos">DESCUBRIR</a>
            <button class="promo-btn" id="openCatalogBtn" aria-label="Ver catálogo">Ver catálogo</button>
          </div>
        </div>
        <div class="promo-mini" aria-hidden="true">✚</div>
      </article>

      <!-- CARD 3: LIXBYCARE+ (antes NUESTRA GARANTÍA) -->
      <article class="promo-card" role="listitem" tabindex="0" aria-labelledby="lixbycare-card-title" data-card="lixbycare">
        <div class="promo-media" aria-hidden="true">
          <img src="https://cdn-icons-png.flaticon.com/512/985/985723.png" alt="LixbyCare+">
        </div>
        <div class="promo-meta">
          <div class="promo-kicker">Seguridad</div>
          <h3 id="lixbycare-card-title" class="promo-title-lg">LixbyCare+</h3>
          <p style="margin:0;color:var(--muted)">2 años de garantía oficial y 30 días para devoluciones sin preguntas.</p>
          <div class="promo-cta-row">
            <a href="Lixbycare.html" class="promo-btn discover-cta" role="button" aria-label="Descubre LixbyCare+">Descubrir</a>
          </div>
        </div>
        <div class="promo-mini" aria-hidden="true"><img src="https://cdn-icons-png.flaticon.com/512/985/985723.png" alt="LixbyCare+" style="width:24px;height:24px;vertical-align:middle;"></div>
      </article>

      <!-- CARD 4: ECO / sostenibilidad (ejemplo añadido) -->
      <article class="promo-card" role="listitem" tabindex="0" aria-labelledby="eco-card-title" data-card="eco">
        <div class="promo-media" aria-hidden="true">
          <img src="https://images.unsplash.com/photo-1501004318641-b39e6451bec6?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=9a2b3c4d5e6f7a8b" alt="Sostenible">
        </div>
        <div class="promo-meta">
          <div class="promo-kicker">Medio ambiente</div>
          <h3 id="eco-card-title" class="promo-title-lg">ECO & SOSTENIBLE</h3>
          <p style="margin:0;color:var(--muted)">Materiales reciclados y programa de reciclaje al comprar.</p>
          <div class="promo-cta-row">
            <button class="promo-btn discover-cta" id="ecoBtn" type="button" aria-label="Más sobre sostenibilidad">Más</button>
          </div>
        </div>
        <div class="promo-mini" aria-hidden="true">♻</div>
      </article>
    </div>
  </section>

  <!-- PRODUCTOS -->
  <section id="productos" class="section reveal" aria-labelledby="prod-title">
    <h2 id="prod-title" data-i18n="section.products">Productos</h2>
    <div class="grid">
      <!-- Lixby One Air -->
      <article class="card glass" data-product="lixby-one-air" role="button" tabindex="0" aria-label="Lixby One Air">
        <div class="thumb">
          <img src="https://m.media-amazon.com/images/I/61j5RD1d9KL._UF1000,1000_QL80_.jpg" alt="Lixby One Air" loading="lazy" decoding="async" width="600" height="600">
        </div>
        <h3 class="prod-title" data-i18n="product.lixby-one-air.title">Lixby One Air</h3>
        <p class="prod-desc" data-i18n="product.lixby-one-air.desc">Ultraligero y económico.</p>
        <span class="price" data-i18n="product.lixby-one-air.price">249€</span>
        <div class="actions"></div>
      </article>
      <!-- Lixby One -->
      <article class="card glass" data-product="lixby-one" role="button" tabindex="0" aria-label="Lixby One">
        <div class="thumb">
          <img src="https://m.media-amazon.com/images/I/712Pyq1hPfL._UF1000,1000_QL80_.jpg" alt="Lixby One" loading="lazy" decoding="async" width="600" height="600">
        </div>
        <h3 class="prod-title" data-i18n="product.lixby-one.title">Lixby One</h3>
        <p class="prod-desc" data-i18n="product.lixby-one.desc">Ultraligero y potente.</p>
        <span class="price" data-i18n="product.lixby-one.price">349€</span>
        <div class="actions"></div>
      </article>
      <!-- Lixby One Pro -->
      <article class="card glass" data-product="lixby-one-pro" role="button" tabindex="0" aria-label="Lixby One Pro">
        <div class="thumb">
          <img src="https://m.media-amazon.com/images/I/61rriyfRKwL.jpg" alt="Lixby One Pro" loading="lazy" decoding="async" width="600" height="600">
        </div>
        <h3 class="prod-title" data-i18n="product.lixby-one-pro.title">Lixby One Pro</h3>
        <p class="prod-desc" data-i18n="product.lixby-one-pro.desc">Audio de alta fidelidad.</p>
        <span class="price" data-i18n="product.lixby-one-pro.price">899€</span>
        <div class="actions"></div>
      </article>
    </div>
  </section>

  <!-- CONTACTO -->
  <section id="contacto" class="section contact-min glass reveal" aria-labelledby="contact-title">
    <div class="left">
      <h2 id="contact-title" data-i18n="contact.title">Contáctanos</h2>
      <p class="lead" data-i18n="contact.lead">Déjanos una duda o sugerencias y te responderemos lo antes posible.</p>
    </div>
    <form id="contactForm" class="form" aria-label="Formulario de contacto" onsubmit="return false;">
      <input id="contactName" name="from_name" type="text" placeholder="Nombre" data-i18n-placeholder="contact.placeholder.name" required autocomplete="name">
      <input id="contactEmail" name="from_email" type="email" placeholder="Correo" data-i18n-placeholder="contact.placeholder.email" required autocomplete="email">
      <textarea id="contactMessage" name="message" placeholder="Tu mensaje" data-i18n-placeholder="contact.placeholder.message" required></textarea>
      <input id="ticketId" type="hidden" name="ticket_id" value="">
      <div class="actions">
        <button type="button" class="btn ghost" onclick="document.getElementById('contactForm').reset();" data-i18n="btn.clear">Borrar</button>
        <button type="submit" id="contactSend" class="btn primary" data-i18n="btn.enviar">Enviar</button>
      </div>
      <div id="contactSuccess" class="contact-success" role="status" aria-live="polite" data-i18n="contact.success">Mensaje enviado. ¡Gracias! Te contestaremos pronto.</div>
    </form>
  </section>

  <!-- CONÓCENOS -->
  <section id="conocenos" class="section reveal" aria-labelledby="about-title">
    <h2 id="about-title" data-i18n="about.title">Conócenos</h2>
    <p data-i18n="about.text">En LIXBY creemos en el equilibrio perfecto entre diseño y funcionalidad. Creamos productos que no solo funcionan, sino que también inspiran.</p>
  </section>
</main>

<!-- debug -->
<div id="debug" style="display:none;max-width:1100px;margin:12px auto;color:var(--muted);white-space:pre-wrap;"></div>

<!-- Footer (con traducciones aplicables) -->
<footer class="footer glass" role="contentinfo" aria-labelledby="footer-heading">
  <div class="footer-grid" id="footerGrid">
    <div class="footer-col">
      <div class="footer-brand">LIXBY</div>
      <p data-i18n="footer.description">Diseño minimalista, tecnología que acompaña tu día a día. Síguenos para novedades y lanzamientos.</p>
      <div class="social-links" aria-label="Redes sociales">
        <a href="#" title="Twitter" aria-label="Twitter" rel="noopener">...</a>
        <a href="#" title="Instagram" aria-label="Instagram" rel="noopener">...</a>
        <a href="#" title="YouTube" aria-label="YouTube" rel="noopener">...</a>
      </div>
    </div>
    <div class="footer-col">
      <h4 data-i18n="footer.links">Enlaces</h4>
      <div class="footer-links" role="navigation" aria-label="Enlaces rápidos">
        <a href="explorar.html" data-i18n="footer.explore">Explorar</a>
        <a href="productos.html" data-i18n="footer.catalog">Catálogo</a>
        <a href="carrito.html" data-i18n="footer.cart">Carrito</a>
        <a href="cuenta.html" data-i18n="footer.account">Mi cuenta</a>
      </div>
    </div>
    <div class="footer-col">
      <h4 data-i18n="footer.help">Ayuda</h4>
      <div class="footer-links">
        <a href="contacto.html" data-i18n="footer.contact">Contacto</a>
        <a href="faq.html" id="footerFaqLink">Preguntas frecuentes</a>
        <a href="envios.html" data-i18n="footer.shipping">Envíos y devoluciones</a>
        <a href="soporte.html" data-i18n="footer.support">Soporte técnico</a>
      </div>
    </div>
    <div class="footer-col" aria-label="Newsletter">
      <h4 data-i18n="footer.subscribe">Suscríbete</h4>
      <p data-i18n="footer.subscribe_text">Recibe novedades, ofertas exclusivas y lanzamientos.</p>
      <form id="newsletterForm" class="newsletter-form" onsubmit="return false;" aria-label="Formulario newsletter">
        <input id="newsletterEmail" type="email" placeholder="tu@correo.com" data-i18n-placeholder="newsletter.placeholder" aria-label="Correo electrónico para newsletter" required>
        <button id="newsletterBtn" type="submit" aria-label="Suscribirse" data-i18n="btn.subscribe">Suscribir</button>
      </form>
      <div style="margin-top:8px;">
        <a id="downloadBtn" class="btn-download" href="download/guide-es.pdf" download data-i18n="btn.download">Descargar</a>
      </div>
      <div id="newsletterMsg" role="status" aria-live="polite" style="margin-top:8px;color:var(--muted);font-size:0.95rem"></div>
    </div>
  </div>
  <div class="footer-bottom">
    <div class="legal-left">
      <small>© <span id="year"></span> LIXBY — Todos los derechos reservados</small>
      <div class="legal-links" style="margin-left:12px;">
        <a href="privacidad.html" data-i18n="footer.privacy">Política de privacidad</a>
        <a href="terminos.html" data-i18n="footer.terms">Términos y condiciones</a>
        <a id="accessibilityLink" href="accessibility.html" aria-label="Ir a la página de accesibilidad" data-i18n="footer.accessibility">Accesibilidad</a>
      </div>
    </div>
    <div style="display:flex;align-items:center;gap:12px;">
      <button id="backToTop" class="back-to-top" aria-label="Volver arriba" title="Volver arriba">↑ Volver arriba</button>
      <small style="color:var(--muted)">Versión demo</small>
    </div>
  </div>
</footer>

<!-- Cart panel (estático) + backdrop (se mantiene funcional) -->
<div id="cartBackdrop" class="cart-backdrop" aria-hidden="true"></div>
<aside id="cartPanel" class="cart-panel" aria-hidden="true">
  <div class="cart-panel-inner glass" role="dialog" aria-label="Carrito">
    <div class="cart-header" style="display:flex;justify-content:space-between;align-items:center;">
      <strong data-i18n="cart.title">Carrito</strong>
      <button id="cartPanelClose" class="text-btn" aria-label="Cerrar" type="button">✕</button>
    </div>
    <div id="cartPanelItems" class="cart-list" style="max-height:60vh;overflow:auto;padding:12px"></div>
    <div class="cart-footer" style="padding:12px;">
      <div style="display:flex;justify-content:space-between;align-items:center;">
        <strong>Total</strong>
        <span id="cartPanelTotal">0€</span>
      </div>
      <div style="display:flex;gap:8px;margin-top:8px;">
        <button id="cartPanelCheckout" class="btn primary" data-i18n="cart.checkout" type="button">Pagar</button>
        <button id="cartPanelClear" class="btn ghost" data-i18n="cart.clear" type="button">Vaciar</button>
      </div>
    </div>
  </div>
</aside>

<div id="announcements" class="sr-only" aria-live="polite" aria-atomic="true"></div>
<noscript style="display:block;background:#fffb; padding:10px; text-align:center;">
  JavaScript está desactivado o ha ocurrido un error. Si la página no carga correctamente, abre la consola (F12 → Console).
</noscript>

<!-- ===========================
     SCRIPTS (inline para copiar directo)
     =========================== -->
<script>
// ... (tus scripts existentes, NO BORRAR)

// Añade al final de tus scripts principales:
(function() {
  // Detecta modo claro/oscuro preferido por el sistema y aplica
  function setThemeFromSystem() {
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    if (prefersDark) {
      document.documentElement.classList.add('dark');
      document.documentElement.classList.remove('light');
      localStorage.setItem('lixby_theme', 'dark');
    } else {
      document.documentElement.classList.add('light');
      document.documentElement.classList.remove('dark');
      localStorage.setItem('lixby_theme', 'light');
    }
  }
  // Al cargar, solo si el usuario aún no ha elegido explícitamente
  if (!localStorage.getItem('lixby_theme')) setThemeFromSystem();
  // Escucha cambios del sistema
  if (window.matchMedia) {
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', setThemeFromSystem);
  }

  // Móvil: Dropdown menú
  const mobileBtn = document.getElementById('mobileMenuBtn');
  const overlay = document.getElementById('mobileMenuOverlay');
  const menu = document.getElementById('mobileDropdownMenu');
  function openMobileMenu() {
    menu.classList.add('open');
    menu.setAttribute('aria-hidden', 'false');
    overlay.classList.add('open');
  }
  function closeMobileMenu() {
    menu.classList.remove('open');
    menu.setAttribute('aria-hidden', 'true');
    overlay.classList.remove('open');
  }
  if (mobileBtn) {
    mobileBtn.addEventListener('click', openMobileMenu);
    mobileBtn.addEventListener('keydown', function(e) {
      if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openMobileMenu(); }
    });
  }
  if (overlay) overlay.addEventListener('click', closeMobileMenu);
  // Cierra con ESC
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && menu.classList.contains('open')) closeMobileMenu();
  });

  // Acciones dentro del menú móvil
  document.getElementById('mobileLangBtn').onclick = function() {
    document.getElementById('langBtn').click();
    closeMobileMenu();
  };
  document.getElementById('mobileCartBtn').onclick = function() {
    window.location.href = 'carrito.html';
    closeMobileMenu();
  };
  document.getElementById('mobileAccountBtn').onclick = function() {
    document.getElementById('accountBtn').click();
    closeMobileMenu();
  };
  document.getElementById('mobileProBtn').onclick = function() {
    window.location.href = 'pro.html';
    closeMobileMenu();
  };
  document.getElementById('mobileThemeToggle').onclick = function() {
    document.getElementById('themeToggle').click();
    closeMobileMenu();
  };
  // Sincroniza flag de idioma y cuenta de carrito en menú móvil
  function syncMobileMenuLangAndCart() {
    const flag = document.getElementById('langFlag').textContent;
    const label = document.getElementById('langLabel').textContent;
    document.getElementById('mobileLangFlag').textContent = flag;
    document.getElementById('mobileLangLabel').textContent = label;
    document.getElementById('mobileCartCount').textContent = document.getElementById('cartCount').textContent;
  }
  setInterval(syncMobileMenuLangAndCart, 500);
})();
</script>
<!-- ... tus otros scripts de sanitización y accesibilidad, no borres nada ... -->
</body>
</html>
