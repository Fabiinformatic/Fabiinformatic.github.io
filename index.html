<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LIXBY ‚Äî Tecnolog√≠a minimalista</title>
  <link rel="stylesheet" href="style.css" />
  <!-- Overrides locales para header y comportamiento consistente -->
  <style>
    /* Header compacto, l√≠nea recta, minimal */
    .nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 120;
      padding: 10px 24px;
      background: rgba(255,255,255,0.02);
      backdrop-filter: blur(8px) saturate(120%);
      -webkit-backdrop-filter: blur(8px) saturate(120%);
      border-bottom: 1px solid rgba(255,255,255,0.03);
      border-radius: 0;
      box-shadow: none;
    }

    .nav-inner {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      min-height: 64px;
      padding: 0 6px;
    }

    /* logo a la izquierda */
    .nav-left { display:flex; align-items:center; gap:8px; flex:0 0 auto; }

    /* nav links centrados */
    #navLinks {
      display:flex;
      gap:18px;
      align-items:center;
      justify-content:center;
      flex: 1 1 auto;
      padding: 8px 12px;
      white-space: nowrap;
    }

    /* controles a la derecha en UNA FILA */
    .nav-right {
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:flex-end;
      flex: 0 0 auto;
      flex-direction: row !important; /* evita columnas impuestas por inline */
    }

    /* Mini-cart / lang positioning (no se apilen) */
    .cart-wrapper { position:relative; }
    .mini-cart { right:18px; top:56px; width:320px; box-sizing:border-box; z-index:140; }
    .lang-menu { right:18px; top:56px; box-sizing:border-box; z-index:140; }

    /* asegurar que main empieza debajo del header (fallback si JS no se ejecuta) */
    main { padding-top: calc(64px + 12px); }

    /* Cart panel styles (basics) */
    .cart-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.45); z-index: 210; display: none; }
    .cart-backdrop.open { display: block; }
    .cart-panel {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      width: 360px;
      transform: translateX(112%);
      transition: transform .28s ease, box-shadow .28s ease;
      z-index: 220;
      display: flex;
      pointer-events: none;
    }
    .cart-panel.open { transform: translateX(0); pointer-events: auto; box-shadow: -24px 0 48px rgba(2,6,12,0.6); }
    .cart-panel .cart-panel-inner {
      width: 100%;
      display:flex;
      flex-direction:column;
      background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
      border-left: 1px solid rgba(255,255,255,0.04);
      padding: 0;
      box-sizing: border-box;
      height: 100%;
    }
    .cart-header { display:flex; justify-content:space-between; align-items:center; padding:12px 14px; border-bottom:1px solid rgba(255,255,255,0.04); }
    .cart-list { padding:12px; overflow:auto; flex:1; }
    .cart-item { display:flex; gap:12px; margin-bottom:10px; align-items:center; padding-bottom:8px; border-bottom:1px solid rgba(255,255,255,0.02); }
    .cart-item img { width:64px; height:64px; object-fit:cover; border-radius:8px; }
    .cart-footer { padding:12px; border-top:1px solid rgba(255,255,255,0.04); display:flex; flex-direction:column; gap:10px; }
    @media (max-width:720px) { .cart-panel { width: 92%; } }
  </style>
</head>
<body>
  <!-- NAV -->
  <header class="nav glass" role="banner">
    <div class="nav-inner">
      <!-- LEFT: logo -->
      <div class="nav-left">
        <div class="brand" role="button" aria-label="Ir al inicio" onclick="location.href='index.html'">LIXBY</div>
      </div>

      <!-- CENTER: nav links -->
      <nav id="navLinks" role="navigation" aria-label="Principal">
        <a href="#inicio" data-i18n="nav.inicio">Inicio</a>
        <a href="#productos" data-i18n="nav.productos">Productos</a>
        <a href="#contacto" data-i18n="nav.contacto">Cont√°ctanos</a>
        <a href="#conocenos" data-i18n="nav.conocenos">Con√≥cenos</a>
      </nav>

      <!-- RIGHT: controles en fila -->
      <div class="nav-right" aria-hidden="false">
        <!-- carrito (mini) -->
        <div class="cart-wrapper" style="position:relative;">
          <button id="cartBtn" class="icon-btn" aria-label="Ver carrito">üõí <span id="cartCount" class="badge">0</span></button>

          <div id="miniCart" class="mini-cart glass" aria-hidden="true">
            <div class="mini-cart-header">
              <strong data-i18n="cart.title">Carrito</strong>
              <button id="clearCart" class="text-btn" data-i18n="cart.clear">Vaciar</button>
            </div>

            <div id="miniCartItems" class="mini-cart-items">
              <!-- items din√°micos -->
            </div>

            <div class="mini-cart-footer" style="display:flex;flex-direction:column;gap:8px;margin-top:8px;">
              <div style="display:flex;justify-content:space-between;align-items:center;">
                <div><strong data-i18n="cart.total">Total:</strong> <span id="miniCartTotal">0‚Ç¨</span></div>
                <div>
                  <button id="checkoutBtn" class="btn primary" data-i18n="cart.checkout">Pagar</button>
                </div>
              </div>
              <div style="display:flex;gap:8px;">
                <button id="viewCartBtn" class="btn ghost">Ver carrito</button>
              </div>
            </div>
          </div>
        </div>

        <!-- selector idioma -->
        <div class="lang-wrapper">
          <button id="langBtn" class="icon-btn" aria-haspopup="true" aria-expanded="false">
            üá™üá∏ <span id="langLabel">Espa√±ol</span> ‚ñæ
          </button>
          <div id="langMenu" class="lang-menu glass" aria-hidden="true">
            <button class="lang-item" data-lang="es">üá™üá∏ Espa√±ol</button>
            <button class="lang-item" data-lang="en">üá¨üáß English</button>
            <button class="lang-item" data-lang="fr">üá´üá∑ Fran√ßais</button>
          </div>
        </div>

        <!-- toggle tema -->
        <button id="themeToggle" class="btn ghost" aria-label="Cambiar tema">‚óê</button>
      </div>
    </div>
  </header>

  <main>
    <!-- HERO -->
    <section id="inicio" class="hero reveal" aria-labelledby="hero-title">
      <div class="hero-content">
        <h1 id="hero-title">La tecnolog√≠a que te entiende</h1>
        <p>Innovaci√≥n minimalista para tu d√≠a a d√≠a</p>
        <a href="#productos" class="btn primary" data-i18n="btn.explorar">Explorar</a>
      </div>
    </section>

    <!-- PRODUCTOS -->
    <section id="productos" class="section reveal" aria-labelledby="prod-title">
      <h2 id="prod-title">Productos</h2>
      <div class="grid">
        <!-- Lixby One -->
        <article class="card glass" data-product="lixby-one" role="button" tabindex="0" aria-label="Lixby One">
          <div class="thumb">
            <img src="https://cdn.grupoelcorteingles.es/SGFM/dctm/MEDIA03/202409/10/00194612201288____11__1200x1200.jpg" alt="Lixby One">
          </div>
          <h3>Lixby One</h3>
          <p>Ultraligero y potente.</p>
          <span class="price">349‚Ç¨</span>
        </article>

        <!-- Lixby One Plus -->
        <article class="card glass" data-product="lixby-one-plus" role="button" tabindex="0" aria-label="Lixby One Plus">
          <div class="thumb">
            <img src="https://media.ldlc.com/r1600/ld/products/00/06/16/66/LD0006166643_0006166668_0006166693.jpg" alt="Lixby One Plus">
          </div>
          <h3>Lixby One Plus</h3>
          <p>Tel√©fono de √∫ltima generaci√≥n.</p>
          <span class="price">659‚Ç¨</span>
        </article>

        <!-- Lixby One Pro -->
        <article class="card glass" data-product="lixby-one-pro" role="button" tabindex="0" aria-label="Lixby One Pro">
          <div class="thumb">
            <img src="https://m.media-amazon.com/images/I/61rriyfRKwL.jpg" alt="Lixby One Pro">
          </div>
          <h3>Lixby One Pro</h3>
          <p>Audio de alta fidelidad.</p>
          <span class="price">1099‚Ç¨</span>
        </article>
      </div>
    </section>

    <!-- CONTACTO -->
    <section id="contacto" class="section glass reveal" aria-labelledby="contact-title">
      <h2 id="contact-title">Cont√°ctanos</h2>
      <p>D√©janos tu mensaje y te responderemos hoy mismo.</p>
      <form class="contact-form" onsubmit="return false;">
        <input type="text" placeholder="Nombre" required>
        <input type="email" placeholder="Correo" required>
        <textarea placeholder="Tu mensaje" required></textarea>
        <button class="btn primary" data-i18n="btn.enviar">Enviar</button>
      </form>
    </section>

    <!-- CON√ìCENOS -->
    <section id="conocenos" class="section reveal" aria-labelledby="about-title">
      <h2 id="about-title">Con√≥cenos</h2>
      <p>En LIXBY creemos en el equilibrio perfecto entre dise√±o y funcionalidad. Creamos productos que no solo funcionan, sino que tambi√©n inspiran.</p>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="footer glass" style="text-align:center;padding:24px;margin-top:40px;">
    <p>¬© <span id="year"></span> LIXBY ‚Äî Todos los derechos reservados</p>
  </footer>

  <!-- Cart panel (est√°tico) + backdrop -->
  <div id="cartBackdrop" class="cart-backdrop" aria-hidden="true"></div>
  <aside id="cartPanel" class="cart-panel" aria-hidden="true">
    <div class="cart-panel-inner glass" role="dialog" aria-label="Carrito">
      <div class="cart-header">
        <strong data-i18n="cart.title">Carrito</strong>
        <button id="cartPanelClose" class="text-btn" aria-label="Cerrar">‚úï</button>
      </div>

      <div id="cartPanelItems" class="cart-list">
        <!-- items din√°micos -->
      </div>

      <div class="cart-footer">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <strong>Total</strong>
          <span id="cartPanelTotal">0‚Ç¨</span>
        </div>
        <div style="display:flex;gap:8px;">
          <button id="cartPanelCheckout" class="btn primary" data-i18n="cart.checkout">Pagar</button>
          <button id="cartPanelClear" class="btn ghost" data-i18n="cart.clear">Vaciar</button>
        </div>
      </div>
    </div>
  </aside>

  <noscript style="display:block;background:#fffb; padding:10px; text-align:center;">
    JavaScript est√° desactivado o ha ocurrido un error. Si la p√°gina no carga correctamente, abre la consola (F12 ‚Üí Console).
  </noscript>

  <!-- peque√±o script fallback: ajusta padding-top seg√∫n header y abre/cierra panel si se pulsa "Ver carrito" -->
  <script>
    (function(){
      function adjustPadding(){
        try {
          const header = document.querySelector('.nav');
          if(!header) return;
          const pad = Math.round(header.getBoundingClientRect().height + 12);
          document.body.style.paddingTop = pad + 'px';
        } catch(e){}
      }
      adjustPadding();
      window.addEventListener('resize', adjustPadding);

      // Fallback very small panel toggle (no conflict if tienes script.js completo)
      const viewBtn = document.getElementById('viewCartBtn');
      const cartPanel = document.getElementById('cartPanel');
      const cartBackdrop = document.getElementById('cartBackdrop');
      const cartPanelClose = document.getElementById('cartPanelClose');

      function setPanel(open){
        if(!cartPanel || !cartBackdrop) return;
        cartPanel.classList.toggle('open', !!open);
        cartBackdrop.classList.toggle('open', !!open);
        cartPanel.setAttribute('aria-hidden', String(!open));
        cartBackdrop.setAttribute('aria-hidden', String(!open));
      }
      if (viewBtn) viewBtn.addEventListener('click', ()=> setPanel(true));
      if (cartBackdrop) cartBackdrop.addEventListener('click', ()=> setPanel(false));
      if (cartPanelClose) cartPanelClose.addEventListener('click', ()=> setPanel(false));
    })();
  </script>

  <!-- tu script principal (defer) -->
  <script src="script.js" defer></script>

  <!-- === A√±adido: FORZAR navegaci√≥n al carrito (capturing listener que tiene prioridad) ===
       Esto garantiza que, al hacer click en el icono, vas a carrito.html (estilo Apple).
       Se usa capture + stopImmediatePropagation para evitar que otros listeners interfieran.
  -->
  <script>
    (function(){
      const btn = document.getElementById('cartBtn');
      if (!btn) return;
      btn.addEventListener('click', function(e){
        try {
          // evita cualquiera otra acci√≥n y fuerza navegaci√≥n
          e.preventDefault();
          e.stopImmediatePropagation && e.stopImmediatePropagation();
        } catch(err){}
        // a√±ade un peque√±o delay para asegurar persistencia visual (opcional)
        window.location.href = 'carrito.html';
      }, true); // useCapture = true -> ejecuta antes que handlers en bubble
    })();
  </script>

</body>
</html>
